[gd_scene load_steps=32 format=3 uid="uid://d3w5gwnffkggo"]

[ext_resource type="Script" uid="uid://dtxmm6es2j3a1" path="res://assets/scenes/play_state/play_state.gd" id="1_edc5a"]
[ext_resource type="Script" uid="uid://b6b5akuiu5gms" path="res://assets/objects/general/ship/shipHandler.gd" id="1_oi2qx"]
[ext_resource type="PackedScene" uid="uid://b56b0d2gngc5i" path="res://assets/objects/general/ship/ship.tscn" id="1_wtpd3"]
[ext_resource type="Texture2D" uid="uid://drky0bx8pl5hu" path="res://assets/images/levels/SHR/floor.png" id="2_lovw6"]
[ext_resource type="Script" uid="uid://d0y83okyn781q" path="res://assets/scenes/play_state/hud.gd" id="5_fmn5d"]
[ext_resource type="Texture2D" uid="uid://crlf2306tx65u" path="res://assets/images/hud/powersicon.png" id="5_km3m7"]
[ext_resource type="AudioStream" uid="uid://b0lq3d8lgrxpf" path="res://assets/sounds/ambience/stampede_amb.ogg" id="5_m3iyk"]
[ext_resource type="AudioStream" uid="uid://chmlr1hxcscp1" path="res://assets/sounds/gameplay/railring.ogg" id="6_6reie"]
[ext_resource type="FontFile" uid="uid://7m4vhh4738ar" path="res://assets/images/hud/powerscounter.png" id="6_c2p2b"]
[ext_resource type="Shader" uid="uid://8rcyn51imi8r" path="res://assets/shaders/screen/colorMod.gdshader" id="7_l10d1"]
[ext_resource type="AudioStream" uid="uid://by43f72wxgt2h" path="res://assets/sounds/gameplay/barrelroll.ogg" id="7_rof2u"]
[ext_resource type="Texture2D" uid="uid://bvnaovxwoc6a8" path="res://assets/images/hud/lira_empty.png" id="7_uuhey"]
[ext_resource type="Texture2D" uid="uid://dsuf8fdy3wmbv" path="res://assets/images/hud/lira_prog.png" id="8_qg2ls"]
[ext_resource type="AudioStream" uid="uid://bnpvn00oye0bc" path="res://assets/sounds/ui/levelup.ogg" id="12_u4v7s"]
[ext_resource type="Texture2D" uid="uid://hno6dj4x2yxl" path="res://assets/images/hud/lira.png" id="13_15aj6"]
[ext_resource type="FontFile" uid="uid://cxeyh34ry08up" path="res://assets/fonts/CrookedLogs.ttf" id="14_yewxg"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_p7wmb"]
sky_top_color = Color(0.382845, 0.629386, 1, 1)
sky_horizon_color = Color(0.7, 1, 0.975, 1)
sky_curve = 0.109806
ground_bottom_color = Color(0.98, 0.938677, 0.7546, 1)
ground_horizon_color = Color(0.98505, 0.99, 0.891, 1)
ground_curve = 0.00568102
sun_curve = 0.115853

[sub_resource type="Sky" id="Sky_wtpd3"]
sky_material = SubResource("ProceduralSkyMaterial_p7wmb")

[sub_resource type="Environment" id="Environment_oi2qx"]
background_mode = 2
sky = SubResource("Sky_wtpd3")
ambient_light_source = 3
ambient_light_color = Color(0.76011, 1, 0.618103, 1)
ambient_light_energy = 0.0
tonemap_white = 10.35
glow_intensity = 1.79
glow_bloom = 0.09
glow_hdr_threshold = 0.56
glow_hdr_scale = 1.46
glow_hdr_luminance_cap = 45.1
fog_enabled = true
fog_mode = 1
fog_light_color = Color(0.980392, 0.945098, 0.776471, 1)
fog_density = 0.9045
fog_sky_affect = 0.0
fog_depth_curve = 0.870553
fog_depth_begin = 0.0
fog_depth_end = 500.0
adjustment_enabled = true

[sub_resource type="CameraAttributesPractical" id="CameraAttributesPractical_edc5a"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_lovw6"]
resource_local_to_scene = true
transparency = 1
cull_mode = 2
shading_mode = 0
albedo_texture = ExtResource("2_lovw6")
uv1_scale = Vector3(500, 500, 500)
uv1_triplanar_sharpness = 9.84916
texture_filter = 4
distance_fade_min_distance = 1092.26
distance_fade_max_distance = 864.7

[sub_resource type="PlaneMesh" id="PlaneMesh_km3m7"]
resource_local_to_scene = true
material = SubResource("StandardMaterial3D_lovw6")

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_c2p2b"]
load_path = "res://.godot/imported/sky.png-7d0889cd5e1065c82792a7ab1b8b37e5.s3tc.ctex"

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_fmn5d"]
resource_local_to_scene = true
transparency = 1
cull_mode = 2
shading_mode = 0
disable_fog = true
albedo_texture = SubResource("CompressedTexture2D_c2p2b")
uv1_scale = Vector3(20, 20, 20)
uv1_triplanar_sharpness = 9.84916
texture_filter = 4
disable_receive_shadows = true
distance_fade_mode = 2
distance_fade_min_distance = 1400.0
distance_fade_max_distance = 300.0

[sub_resource type="PlaneMesh" id="PlaneMesh_wtpd3"]
resource_local_to_scene = true
material = SubResource("StandardMaterial3D_fmn5d")

[sub_resource type="BoxShape3D" id="BoxShape3D_oi2qx"]
size = Vector3(11.359, 6.30129, 11.508)

[sub_resource type="BoxMesh" id="BoxMesh_lovw6"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_u4v7s"]
shader = ExtResource("7_l10d1")
shader_parameter/multipliers = Projection(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)
shader_parameter/offsets = Vector4(0, 0, 0, 0)

[sub_resource type="Curve" id="Curve_yewxg"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0.179775), -2.04494, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_6reie"]
curve = SubResource("Curve_yewxg")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_rof2u"]
lifetime_randomness = 0.41
emission_shape_scale = Vector3(1.75, 1, 1)
emission_shape = 1
emission_sphere_radius = 13.08
angle_min = 1.07288e-05
angle_max = 1.07288e-05
inherit_velocity_ratio = 0.236
velocity_pivot = Vector3(4.61, 0, 0)
direction = Vector3(0, -3.84, 0)
spread = 24.623
flatness = 0.33
initial_velocity_min = 200.0
initial_velocity_max = 422.73
gravity = Vector3(0, 98, 0)
scale_min = 0.0
scale_max = 3.0
scale_curve = SubResource("CurveTexture_6reie")

[node name="PlayState" type="Node3D"]
script = ExtResource("1_edc5a")

[node name="Background" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_oi2qx")
camera_attributes = SubResource("CameraAttributesPractical_edc5a")

[node name="Sun" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -0.939693, 0.34202, 0, -0.34202, -0.939693, -0.695551, 4.4608, 2.72634)
light_color = Color(0.944882, 0.968301, 0.955761, 1)
light_indirect_energy = 0.0
light_volumetric_fog_energy = 0.0
light_angular_distance = 1.0
light_specular = 3.0
light_bake_mode = 0

[node name="Camera" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.64541, 0)
keep_aspect = 0
fov = 90.0
near = 0.001
far = 2000.0

[node name="Floor" type="MeshInstance3D" parent="."]
transform = Transform3D(2000, 0, 0, 0, 0.319, 0, 0, 0, 2000, 0, -30.306, -1900)
mesh = SubResource("PlaneMesh_km3m7")
skeleton = NodePath("")

[node name="Sky" type="MeshInstance3D" parent="."]
transform = Transform3D(2000, 0, 0, 0, 0.319, 0, 0, 0, 2000, 0, 200, -1900)
mesh = SubResource("PlaneMesh_wtpd3")
skeleton = NodePath("")

[node name="Objects" type="Node3D" parent="."]

[node name="Ship" type="CharacterBody3D" parent="Objects"]
transform = Transform3D(-1.74846e-08, 0, 0.4, 0, 0.4, 0, -0.4, 0, -1.74846e-08, 0, 0, -20.061)
motion_mode = 1
slide_on_ceiling = false
floor_max_angle = 3.14159
floor_snap_length = 0.0
script = ExtResource("1_oi2qx")

[node name="Model" parent="Objects/Ship" instance=ExtResource("1_wtpd3")]

[node name="Hitbox" type="CollisionShape3D" parent="Objects/Ship"]
transform = Transform3D(1, 0, 1.81188e-13, 0, 1, 0, -1.81188e-13, 0, 1, -0.149689, -0.121717, -0.0356116)
shape = SubResource("BoxShape3D_oi2qx")
debug_color = Color(0, 0.741176, 1, 1)
metadata/type = "player"

[node name="Ambience" type="AudioStreamPlayer3D" parent="Objects/Ship"]
stream = ExtResource("5_m3iyk")
max_db = -10.0
pitch_scale = 0.18
bus = &"Ambience"

[node name="Shot" type="AudioStreamPlayer" parent="Objects/Ship"]
stream = ExtResource("6_6reie")
volume_db = -18.881
max_polyphony = 6
bus = &"SFX"

[node name="Barrelroll" type="AudioStreamPlayer" parent="Objects/Ship"]
stream = ExtResource("7_rof2u")
max_polyphony = 2
bus = &"SFX"

[node name="ShootLines" type="Node3D" parent="Objects/Ship"]

[node name="1" type="Marker3D" parent="Objects/Ship/ShootLines"]
transform = Transform3D(1, 0, 1.06581e-14, 0, 1, 0, -1.06581e-14, 0, 1, 11.2765, -1.28679, 4.91736e-07)
metadata/levelConstrain = PackedInt32Array(1, 3)

[node name="2" type="Marker3D" parent="Objects/Ship/ShootLines"]
transform = Transform3D(1, 0, 2.13163e-14, 0, 1, 0, -1.06581e-14, 0, 1.48976, 7.51899, -1.40075, -1.40902)
metadata/levelConstrain = PackedInt32Array(2, 3)

[node name="3" type="Marker3D" parent="Objects/Ship/ShootLines"]
transform = Transform3D(1, 0, 2.13163e-14, 0, 1, 0, -1.06581e-14, 0, 1.48976, 7.51982, -1.40075, 1.41361)
metadata/levelConstrain = PackedInt32Array(2, 3)

[node name="Chunk References For Future" type="Node3D" parent="."]
transform = Transform3D(800, 0, 0, 0, 59.125, 0, 0, 0, 2.948, 0, -30.095, -48)
visible = false

[node name="BGChunkWidthRef" type="MeshInstance3D" parent="Chunk References For Future"]
layers = 2
mesh = SubResource("BoxMesh_lovw6")
skeleton = NodePath("../..")

[node name="BGChunkWidthRef2" type="MeshInstance3D" parent="Chunk References For Future"]
transform = Transform3D(0.176, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.38798)
layers = 2
mesh = SubResource("BoxMesh_lovw6")
skeleton = NodePath("../..")

[node name="PLChunkWidthRef" type="MeshInstance3D" parent="Chunk References For Future"]
transform = Transform3D(0.0623375, 0, 0, 0, 1.08541, 0, 0, 0, 1.54274, 0, 0.00820291, 6.13094)
layers = 2
mesh = SubResource("BoxMesh_lovw6")
skeleton = NodePath("../..")

[node name="HUD" type="CanvasLayer" parent="."]
layer = 3
script = ExtResource("5_fmn5d")

[node name="LiraGroup" type="CanvasGroup" parent="HUD"]
material = SubResource("ShaderMaterial_u4v7s")
fit_margin = 100.0

[node name="LiraBar" type="TextureProgressBar" parent="HUD/LiraGroup"]
offset_left = 1200.0
offset_top = 556.0
offset_right = 1232.0
offset_bottom = 840.0
allow_greater = true
allow_lesser = true
fill_mode = 3
texture_under = ExtResource("7_uuhey")
texture_progress = ExtResource("8_qg2ls")

[node name="Bag" type="Sprite2D" parent="HUD/LiraGroup"]
position = Vector2(1196, 862)
texture = ExtResource("5_km3m7")

[node name="Lira" type="Label" parent="HUD/LiraGroup"]
offset_left = 696.0
offset_top = 853.0
offset_right = 1216.0
offset_bottom = 928.0
theme_override_fonts/font = ExtResource("6_c2p2b")
text = "1234567890"
horizontal_alignment = 2

[node name="LiraParticles" type="GPUParticles2D" parent="HUD/LiraGroup"]
self_modulate = Color(1, 1, 1, 0.00392157)
position = Vector2(1213, 817)
emitting = false
amount = 40
texture = ExtResource("13_15aj6")
lifetime = 1.2
one_shot = true
preprocess = 0.27
speed_scale = 2.05
explosiveness = 0.88
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_rof2u")

[node name="LevelText" type="Label" parent="HUD/LiraGroup"]
offset_left = 1167.0
offset_top = 513.0
offset_right = 1268.0
offset_bottom = 557.0
theme_override_constants/outline_size = 10
theme_override_fonts/font = ExtResource("14_yewxg")
theme_override_font_sizes/font_size = 32
text = "LV 10"
horizontal_alignment = 1
vertical_alignment = 1

[node name="LevelUp" type="AudioStreamPlayer2D" parent="HUD/LiraGroup"]
stream = ExtResource("12_u4v7s")
max_polyphony = 3
panning_strength = 0.0
bus = &"SFX"
